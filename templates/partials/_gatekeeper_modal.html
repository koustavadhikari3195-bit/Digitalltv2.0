<!-- Triggered by popup_manager.js after 4s, only on first visit -->
<div id="gatekeeper-modal"
     class="hidden fixed inset-0 z-[999] flex items-center justify-center p-4"
     style="background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);">

  <div class="relative w-full max-w-lg bg-[#0A0A0A] border border-white/10 rounded-2xl p-8
              shadow-[0_0_80px_rgba(255,107,0,0.08)]">

    <!-- Close (skip) button — top right -->
    <button id="gatekeeper-skip"
            class="absolute top-5 right-5 text-[#A0A0A0] hover:text-white transition-colors text-sm
                   flex items-center gap-1.5 group">
      No thanks, I hate growth
      <!-- Inline SVG arrow -->
      <svg class="w-3.5 h-3.5 group-hover:translate-x-0.5 transition-transform"
           viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </button>

    <!-- Header -->
    <p class="text-[#FF6B00] text-xs font-mono tracking-[0.2em] uppercase mb-3">
      Before You Explore
    </p>
    <h2 class="text-[var(--white)] font-display text-2xl font-black leading-tight mb-2">
      Let's see if we're a fit.
    </h2>
    <p class="text-[#A0A0A0] text-sm mb-7 leading-relaxed">
      Drop your details — we'll audit your current digital presence for free
      and tell you exactly where you're leaving money on the table.
    </p>

    <!-- HTMX Form -->
    <form hx-post="/leads/capture/"
          hx-target="#gatekeeper-response"
          hx-swap="innerHTML"
          hx-indicator="#gatekeeper-spinner"
          class="flex flex-col gap-3">
      {% csrf_token %}
      <input type="text" name="name" required placeholder="Your name"
             maxlength="100"
             class="bg-[#141414] border border-white/10 rounded-lg px-4 py-3 text-sm text-white
                    placeholder-[#555] focus:outline-none focus:border-[#FF6B00] transition-colors">
      <input type="email" name="email" required placeholder="Work email"
             maxlength="254"
             class="bg-[#141414] border border-white/10 rounded-lg px-4 py-3 text-sm text-white
                    placeholder-[#555] focus:outline-none focus:border-[#FF6B00] transition-colors">
      <input type="url" name="website" placeholder="Your website URL (optional)"
             maxlength="2000"
             class="bg-[#141414] border border-white/10 rounded-lg px-4 py-3 text-sm text-white
                    placeholder-[#555] focus:outline-none focus:border-[#FF6B00] transition-colors">

      <button type="submit"
              class="bg-[#FF6B00] text-black py-3.5 rounded-lg font-bold text-sm
                     hover:bg-orange-500 active:scale-[0.98] transition-all mt-1 relative">
        <span id="gatekeeper-spinner" class="htmx-indicator absolute inset-0 flex items-center justify-center">
          <svg class="animate-spin w-4 h-4" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" stroke-dasharray="60" stroke-dashoffset="15"/>
          </svg>
        </span>
        <span class="htmx-hide-on-request">Get My Free Audit →</span>
      </button>
    </form>

    <div id="gatekeeper-response" class="mt-3 text-sm min-h-[20px]"></div>

    <p class="text-[#555] text-xs mt-5 text-center">
      No spam. No CRM blasts. One real conversation.
    </p>
  </div>
</div>
